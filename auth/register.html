<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Register | MyApp</title>
      <script src="https://cdn.tailwindcss.com"></script>
   </head>
   <body class="bg-gray-100 flex items-center justify-center h-screen">
      <div class="bg-white rounded-2xl shadow-lg p-8 w-full max-w-md">
         <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Create Account</h2>
         <form id="registerForm" class="space-y-5">
            <div>
               <label class="block text-sm font-medium text-gray-700 mb-1">Username</label>
               <input type="text" name="username" id="username" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 p-2" required />
            </div>
            <div>
               <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
               <input type="password" name="password" id="password" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 p-2" required />
            </div>
            <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded-lg transition">
            Register
            </button>
         </form>
         <p class="text-center text-sm text-gray-600 mt-4">
            Already have an account?
            <a href="login.html" class="text-indigo-600 font-medium hover:underline">Login</a>
         </p>
         <div id="msg" class="text-center mt-4 text-sm font-medium"></div>
      </div>
      <script>
         const form = document.getElementById("registerForm");
         const msg = document.getElementById("msg");
         
         form.addEventListener("submit", async (e) => {
           e.preventDefault();
           msg.textContent = "";
         
           const data = {
             username: form.username.value.trim(),
             password: form.password.value.trim(),
           };
         
           try {
             const res = await fetch("http://127.0.0.1:5000/api/auth/register", {
               method: "POST",
               headers: { "Content-Type": "application/json" },
               body: JSON.stringify(data),
             });
         
             const result = await res.json();
         
             if (res.ok) {
               msg.textContent = "✅ " + result.message;
               msg.className = "text-green-600 font-semibold text-center mt-4";
               form.reset();
               setTimeout(() => window.location.href = "login.html", 1000);
             } else {
               msg.textContent = "❌ " + (result.error || "Something went wrong");
               msg.className = "text-red-600 font-semibold text-center mt-4";
             }
           } catch (error) {
             msg.textContent = "❌ Network error";
             msg.className = "text-red-600 font-semibold text-center mt-4";
           }
         });
      </script>
   </body>
</html>